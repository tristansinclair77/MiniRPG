<UserControl x:Class="MiniRPG.QuestBoardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="500" d:DesignWidth="700">
    <!-- TODO: Add parchment background -->
    <!-- TODO: Add quest board animation -->
    <!-- TODO: Replace text with stylized UI -->
    <Grid Margin="10" Background="#222233">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="2*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="1*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" />
            <ColumnDefinition Width="3*" />
        </Grid.ColumnDefinitions>

        <!-- Quest Board Header -->
        <TextBlock Grid.Row="0" Grid.ColumnSpan="2" 
                   Text="Quest Board" 
                   FontSize="24" 
                   FontWeight="Bold" 
                   Foreground="#F9E97A" 
                   HorizontalAlignment="Center" 
                   Margin="0,0,0,15" />

        <!-- Left ListBox: Available Quests -->
        <Border Grid.Row="1" Grid.Column="0" 
                Background="#292944" 
                Padding="8" 
                Margin="0,0,10,0"
                BorderBrush="#444466" 
                BorderThickness="2" 
                CornerRadius="6">
            <StackPanel>
                <TextBlock Text="Available Quests" 
                           FontWeight="Bold" 
                           Foreground="#F9E97A" 
                           FontSize="16"
                           Margin="0,0,0,8" />
                <ListBox x:Name="AvailableQuestsListBox"
                         ItemsSource="{Binding AvailableQuests}"
                         SelectedItem="{Binding SelectedQuest, Mode=TwoWay}"
                         Background="#222233"
                         Foreground="White"
                         Height="200">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="5">
                                <TextBlock Text="{Binding Title}" 
                                           FontWeight="Bold" 
                                           Foreground="White" 
                                           FontSize="14" />
                                <TextBlock Text="{Binding RewardGold, StringFormat='Reward: {0} gold'}" 
                                           Foreground="#F9E97A" 
                                           FontSize="12" 
                                           Margin="0,2,0,0" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </Border>

        <!-- Right Panel: Quest Details -->
        <Border Grid.Row="1" Grid.Column="1" 
                Background="#292944" 
                Padding="15" 
                BorderBrush="#444466" 
                BorderThickness="2" 
                CornerRadius="6">
            <StackPanel>
                <!-- Quest Title -->
                <TextBlock Text="{Binding QuestTitle}" 
                           FontSize="18" 
                           FontWeight="Bold" 
                           Foreground="#F9E97A" 
                           TextWrapping="Wrap"
                           Margin="0,0,0,10" />
                
                <!-- Quest Description -->
                <ScrollViewer VerticalScrollBarVisibility="Auto" 
                              Height="120" 
                              Margin="0,0,0,15">
                    <TextBlock Text="{Binding QuestDescription}" 
                               Foreground="White" 
                               FontSize="14"
                               TextWrapping="Wrap" 
                               LineHeight="20" />
                </ScrollViewer>
                
                <!-- Accept Quest Button -->
                <Button Content="Accept Quest"
                        Command="{Binding AcceptQuestCommand}"
                        Width="140"
                        Height="35"
                        Padding="8,4"
                        Foreground="#F9E97A"
                        Background="#444466"
                        FontWeight="Bold"
                        FontSize="14"
                        HorizontalAlignment="Center"
                        Margin="0,5,0,0">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="#444466" />
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#555577" />
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="Background" Value="#333344" />
                                    <Setter Property="Foreground" Value="#888899" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>
            </StackPanel>
        </Border>

        <!-- Separator -->
        <Border Grid.Row="2" Grid.ColumnSpan="2" 
                Height="2" 
                Background="#444466" 
                Margin="0,15,0,15" />

        <!-- Bottom ListBox: Active Quests -->
        <Border Grid.Row="3" Grid.ColumnSpan="2" 
                Background="#292944" 
                Padding="8" 
                BorderBrush="#444466" 
                BorderThickness="2" 
                CornerRadius="6">
            <StackPanel>
                <TextBlock Text="Active Quests" 
                           FontWeight="Bold" 
                           Foreground="#F9E97A" 
                           FontSize="16"
                           Margin="0,0,0,8" />
                <ListBox x:Name="ActiveQuestsListBox"
                         ItemsSource="{Binding ActiveQuests}"
                         Background="#222233"
                         Foreground="White"
                         Height="120">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="5">
                                <TextBlock Text="{Binding Title}" 
                                           FontWeight="Bold" 
                                           Foreground="White" 
                                           FontSize="14" 
                                           Width="200" />
                                <TextBlock Text="{Binding CurrentKills, StringFormat='Progress: {0}'}" 
                                           Foreground="#AABBCC" 
                                           FontSize="12" 
                                           Margin="10,0,5,0" />
                                <TextBlock Text="/" 
                                           Foreground="#AABBCC" 
                                           FontSize="12" />
                                <TextBlock Text="{Binding RequiredKills}" 
                                           Foreground="#AABBCC" 
                                           FontSize="12" 
                                           Margin="5,0,0,0" />
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </Border>

        <!-- Exit Quest Board Button -->
        <Button Grid.Row="4" Grid.ColumnSpan="2" 
                Content="Leave Quest Board" 
                Command="{Binding ExitQuestBoardCommand}"
                Margin="0,15,0,0" 
                Padding="10,6" 
                Foreground="#F9E97A" 
                Background="#222233" 
                FontWeight="Bold"
                FontSize="14"
                HorizontalAlignment="Center"
                Width="180">
        </Button>
    </Grid>
</UserControl>